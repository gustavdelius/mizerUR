<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unstructured Resources for Mizer • mizerUR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Unstructured Resources for Mizer">
<meta property="og:description" content="More about what it does (maybe more than one line)
    Use four spaces when indenting paragraphs within the Description.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mizerUR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gustavdelius/mizerUR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="mizerur" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mizerur" class="anchor"></a>mizerUR</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>This is an extension package for the mizer package <a href="https://sizespectrum.org/mizer/" class="uri">https://sizespectrum.org/mizer/</a>. Mizer has a size-structured planktonic resource. With this extension you can also model any number of unstructured resource components. Such unstructured components are appropriate whenever the predation on these components is not size based.</p>
<p>Possible applications include the modelling of detritus as a resource for detritivores, carrion as a resource for scavengers, or macroflora on which fish can graze.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install mizerUR from <a href="https://github.com/gustavdelius/mizerUR">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"gustavdelius/mizerUR"</span>)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>The mizerUR package facilitates adding unstructured resource components to an existing MizerParams object. Here we will illustrate the process with an example MizerParams object that ships with the mizer package.</p>
<p>I will provide a more realistic example here once it is ready and tested.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(mizer)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(mizerUR)</span>
<span id="cb2-3"><a href="#cb2-3"></a>params &lt;-<span class="st"> </span>NS_params</span>
<span id="cb2-4"><a href="#cb2-4"></a>params<span class="op">@</span>species_params<span class="op">$</span>species</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;  [1] "Sprat"   "Sandeel" "N.pout"  "Herring" "Dab"     "Whiting" "Sole"   </span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt;  [8] "Gurnard" "Plaice"  "Haddock" "Cod"     "Saithe"</span></span></code></pre></div>
<p>Let us introduce a detritus component. The mizerUR package provides a function <code><a href="reference/detritus_dynamics.html">detritus_dynamics()</a></code> that we will use to model the detritus. We set this up by creating a named list</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>dynamics &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">detritus =</span> <span class="st">"detritus_dynamics"</span>)</span></code></pre></div>
<p>The <code><a href="reference/detritus_dynamics.html">detritus_dynamics()</a></code> function uses two parameters</p>
<ul>
<li>
<code>detritus_external</code> gives the rate of change of detritus from external sources in grams/year,</li>
<li>
<code>detritus_proportion</code> gives the proportion of the biomass consumed by fish that flows into the detritus component.</li>
</ul>
<p>We need to give values for these parameters in a named list</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>dynamics_params &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">`</span><span class="dt">detritus_external</span><span class="st">`</span> =<span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb4-2"><a href="#cb4-2"></a>                        <span class="st">`</span><span class="dt">detritus_proportion</span><span class="st">`</span> =<span class="st"> </span><span class="fl">0.1</span>)</span></code></pre></div>
<p>Finally we need to specify the rate in proportion/year at which fish encounter detritus biomass. We use an allometric rate for this, which means that we only need to specify the rate for a fish of 1 gram and rates at other sizes will be scaled appropriately. This rate is species specific, so it goes into a new column in the <code>species_params</code> data frame. Let us set some (unrealistic made-up) values.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>params<span class="op">@</span>species_params<span class="op">$</span>rho_detritus &lt;-<span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">20</span> ,<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">5</span>) <span class="op">*</span><span class="st"> </span><span class="fl">1e-15</span></span></code></pre></div>
<p>We can now add the detritus component with <code><a href="reference/setUR.html">setUR()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>params &lt;-<span class="st"> </span><span class="kw"><a href="reference/setUR.html">setUR</a></span>(params, dynamics, dynamics_params)</span></code></pre></div>
<p>See the help page for <code><a href="reference/setUR.html">setUR()</a></code> for more details.</p>
<p>The initial value of the resource biomass is <code><a href="reference/URInitial.html">URInitial(params)</a></code>. We set it as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="reference/URInitial.html">URInitial</a></span>(params) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">detritus =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">12</span>)</span></code></pre></div>
<p>We can now run the model in the usual way using the <code><a href="https://sizespectrum.github.io/mizer//reference/project.html">project()</a></code> function of the mizer package.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>sim &lt;-<span class="st"> </span><span class="kw"><a href="https://sizespectrum.github.io/mizer//reference/project.html">project</a></span>(params, <span class="dt">progress_bar =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>We can extract the detritus biomass from the sim object with <code><a href="reference/UR.html">UR(sim)</a></code> which will return an array with one row for each saved time in the sim object. We can use this in a plot for example.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://sizespectrum.github.io/mizer//reference/reexports.html">melt</a></span>(<span class="kw"><a href="reference/UR.html">UR</a></span>(sim))) <span class="op">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> t, <span class="dt">y =</span> value)) <span class="op">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10</a></span>() <span class="op">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Time [years]"</span>) <span class="op">+</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Detritus biomass [g]"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/gustavdelius/mizerUR">https://​github.com/​gustavdelius/​mizerUR</a>
</li>
<li>Report a bug at <br><a href="https://github.com/gustavdelius/mizerUR/issues">https://​github.com/​gustavdelius/​mizerUR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gustav Delius <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Gustav Delius.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
